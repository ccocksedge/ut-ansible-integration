<?xml version="1.0" encoding="UTF-8"?><unload unload_date="2020-07-08 15:20:31" unload_format="1" unload_table="ops_unv_tmplt" unload_version="6.8.0.0"><ops_unv_tmplt action="INSERT_OR_UPDATE"><credentials_var/><agent>aa288d4fa10945dd895038893cf96b2d</agent><icon_date_created>2020-04-07 21:21:29</icon_date_created><sys_updated_on>2020-04-17 16:06:17</sys_updated_on><output_return_text/><sys_updated_by>Ravi</sys_updated_by><sys_created_on>2020-04-07 21:21:29</sys_created_on><agent_cluster_var/><agent_cluster_var_check>false</agent_cluster_var_check><wait_for_output>false</wait_for_output><sys_created_by>Ravi</sys_created_by><output_return_nline>100</output_return_nline><exit_code_text/><exit_code_fr>0</exit_code_fr><runtime_dir/><output_return_type>1</output_return_type><script/><broadcast_cluster_var_check>false</broadcast_cluster_var_check><agent_type>2</agent_type><script_type_windows/><automatic_output_fr>0</automatic_output_fr><agent_cluster/><name>Ansible-Exec-Playbook</name><exit_codes>0</exit_codes><broadcast_cluster/><use_common_script>false</use_common_script><credentials>1211ec95ae8442539849496c3e040152</credentials><icon_filesize>2504</icon_filesize><icon>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</icon><credential_fr>0</credential_fr><description>Execute Ansible playbook</description><environment_variables_fr>0</environment_variables_fr><agent_var/><icon_filename>ansible.png</icon_filename><sys_id>efa82aef4d624363bd480bb8a7efcfc2</sys_id><variable_prefix>AN</variable_prefix><system_template>false</system_template><script_windows/><credentials_var_check>false</credentials_var_check><agent_fr>0</agent_fr><agent_var_check>false</agent_var_check><output_failure_only>false</output_failure_only><output_return_sline>1</output_return_sline><output_type>1</output_type><desktop_interact>false</desktop_interact><script_unix>#!/bin/sh
###############################################################################
#
#    Name: Ansible Playbook Execution
#
#    Purpose: Execute Ansible playbook and other ansible commands
#             from universal controller
#
#
#    Prerequisites:
#     - Universal Agent for Unix/Linux
#
#     Version History:
#     1.0  Ravi Kumar Murugesan    2020-09-09    &lt;initial Version - Ansible integration
#
###############################################################################
#check the selected option for ansible execution utility
ansible_option=${ops_AN_ansible_utility}
if [ "$ansible_option" = "Ansible-Playbook" ]; then
  echo "****Initiating Request with Ansible"
  exec_choice=${ops_AN_exec_option}
  echo "check exec choice : $exec_choice"
  if [ "$exec_choice" = "command" ]; then 
      ansible-playbook ${ops_AN_ansible_playbook} -i ${ops_AN_ansible_inventory} ${ops_AN_other_parameters}
      if [ $? -eq 0 ]
      then
          echo "****Ansible Playbook executed Successfully"
          exit 0
      else
          echo "****Ansible Playbook got execution errors"
          exit 1
      fi
  else
     if [ "$exec_choice" = "script" ]; then
       echo "script :${ops_AN_playbook_script}"
       script_path="${_scriptPath('${ops_AN_playbook_script}')}"
       ansible-playbook $script_path -i ${ops_AN_ansible_inventory} ${ops_AN_other_parameters}
       if [ $? -eq 0 ]
       then
         echo "****Ansible Playbook executed Successfully"
         exit 0
       else
         echo "****Ansible Playbook got execution errors"
         exit 1
       fi
      fi
  fi
else
   ${ops_AN_other_parameters}
          if [ $? -eq 0 ]
       then
         echo "****Ansible command executed Successfully"
         exit 0
       else
         echo "****Ansible Playbook got execution errors"
         exit 1
       fi
fi</script_unix><output_return_file/><run_as_sudo>false</run_as_sudo><broadcast_cluster_var/><environment/><elevate_user>false</elevate_user><exit_code_output/><exit_code_processing>1</exit_code_processing><create_console>false</create_console><related_items_node><ops_unv_tmplt_field action="INSERT_OR_UPDATE"><choice_sort_option>1</choice_sort_option><form_start_row>false</form_start_row><sys_updated_on>2020-04-09 13:49:29</sys_updated_on><boolean_value_type>1</boolean_value_type><required>false</required><field_mask/><boolean_no_value/><require_if_field/><sys_id>96c782531acd4fb4b0f38cc842b4acbe</sys_id><require_if_field_value/><array_name_title/><sys_updated_by>Ravi</sys_updated_by><array_value_title/><sys_created_on>2020-04-09 13:47:12</sys_created_on><field_value/><no_space_if_hidden>false</no_space_if_hidden><require_if_visible>false</require_if_visible><sys_created_by>Ravi</sys_created_by><int_field_min/><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id><show_if_field/><boolean_yes_value/><form_col_span>1</form_col_span><field_length/><form_end_row>false</form_end_row><label>Ansible Utility</label><int_field_max/><choice_allow_empty>false</choice_allow_empty><sequence>0</sequence><show_if_field_value/><form_row_span>1</form_row_span><default_list_view>false</default_list_view><hint>Key in the required Ansible Utility</hint><field_mapping>choiceField2</field_mapping><name>ansible_utility</name><field_regex/><field_type>4</field_type></ops_unv_tmplt_field><ops_unv_tmplt_field action="INSERT_OR_UPDATE"><choice_sort_option>1</choice_sort_option><form_start_row>false</form_start_row><sys_updated_on>2020-04-22 08:36:11</sys_updated_on><boolean_value_type>1</boolean_value_type><required>false</required><field_mask/><boolean_no_value/><require_if_field/><sys_id>b12e44da9bf14ec7b07a3195ee3bea86</sys_id><require_if_field_value/><array_name_title/><sys_updated_by>Ravi</sys_updated_by><array_value_title/><sys_created_on>2020-04-07 21:27:36</sys_created_on><field_value/><no_space_if_hidden>true</no_space_if_hidden><require_if_visible>true</require_if_visible><sys_created_by>Ravi</sys_created_by><int_field_min/><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id><show_if_field>choiceField1</show_if_field><boolean_yes_value/><form_col_span>1</form_col_span><field_length/><form_end_row>false</form_end_row><label>Ansible Playbook</label><int_field_max/><choice_allow_empty>false</choice_allow_empty><sequence>2</sequence><show_if_field_value>Ansible-Playbook,command</show_if_field_value><form_row_span>1</form_row_span><default_list_view>false</default_list_view><hint>Provide ansible playbook path and name /home/centos/demo_playbook.yml</hint><field_mapping>textField1</field_mapping><name>ansible_playbook</name><field_regex/><field_type>1</field_type></ops_unv_tmplt_field><ops_unv_tmplt_field action="INSERT_OR_UPDATE"><choice_sort_option>1</choice_sort_option><form_start_row>false</form_start_row><sys_updated_on>2020-04-09 14:45:54</sys_updated_on><boolean_value_type>1</boolean_value_type><required>false</required><field_mask/><boolean_no_value/><require_if_field>choiceField2</require_if_field><sys_id>ba6efdad5ab44e27aeef87d795198f59</sys_id><require_if_field_value>Other-Ansible-Utility</require_if_field_value><array_name_title/><sys_updated_by>Ravi</sys_updated_by><array_value_title/><sys_created_on>2020-04-07 21:30:15</sys_created_on><field_value/><no_space_if_hidden>false</no_space_if_hidden><require_if_visible>false</require_if_visible><sys_created_by>Ravi</sys_created_by><int_field_min/><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id><show_if_field/><boolean_yes_value/><form_col_span>3</form_col_span><field_length/><form_end_row>false</form_end_row><label>Ansible Command Options</label><int_field_max/><choice_allow_empty>false</choice_allow_empty><sequence>5</sequence><show_if_field_value/><form_row_span>1</form_row_span><default_list_view>false</default_list_view><hint>if needed include other command options e.g. --limit 'all:!host1'</hint><field_mapping>textField3</field_mapping><name>other_parameters</name><field_regex/><field_type>1</field_type></ops_unv_tmplt_field><ops_unv_tmplt_field action="INSERT_OR_UPDATE"><choice_sort_option>1</choice_sort_option><form_start_row>false</form_start_row><sys_updated_on>2020-04-22 08:36:06</sys_updated_on><boolean_value_type>1</boolean_value_type><required>false</required><field_mask/><boolean_no_value/><require_if_field/><sys_id>c60443b77ba340c89a961e7c8b49d2d6</sys_id><require_if_field_value/><array_name_title/><sys_updated_by>Ravi</sys_updated_by><array_value_title/><sys_created_on>2020-04-07 21:28:57</sys_created_on><field_value>/etc/ansible/hosts</field_value><no_space_if_hidden>true</no_space_if_hidden><require_if_visible>true</require_if_visible><sys_created_by>Ravi</sys_created_by><int_field_min/><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id><show_if_field>choiceField1</show_if_field><boolean_yes_value/><form_col_span>1</form_col_span><field_length/><form_end_row>false</form_end_row><label>Ansible Inventory</label><int_field_max/><choice_allow_empty>false</choice_allow_empty><sequence>3</sequence><show_if_field_value>command,script,Ansible-Playbook</show_if_field_value><form_row_span>1</form_row_span><default_list_view>false</default_list_view><hint>Provide ansible inventory path and file name if not default</hint><field_mapping>textField2</field_mapping><name>ansible_inventory</name><field_regex/><field_type>1</field_type></ops_unv_tmplt_field><ops_unv_tmplt_field action="INSERT_OR_UPDATE"><choice_sort_option>1</choice_sort_option><form_start_row>true</form_start_row><sys_updated_on>2020-04-22 08:36:00</sys_updated_on><boolean_value_type>1</boolean_value_type><required>false</required><field_mask/><boolean_no_value/><require_if_field/><sys_id>c7e05181832c4a09999ad0354bf8b559</sys_id><require_if_field_value/><array_name_title/><sys_updated_by>Ravi</sys_updated_by><array_value_title/><sys_created_on>2020-04-07 21:39:18</sys_created_on><field_value/><no_space_if_hidden>true</no_space_if_hidden><require_if_visible>true</require_if_visible><sys_created_by>Ravi</sys_created_by><int_field_min/><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id><show_if_field>choiceField1</show_if_field><boolean_yes_value/><form_col_span>3</form_col_span><field_length/><form_end_row>true</form_end_row><label>Ansible Playbook Script</label><int_field_max/><choice_allow_empty>false</choice_allow_empty><sequence>4</sequence><show_if_field_value>script,Ansible-Playbook</show_if_field_value><form_row_span>1</form_row_span><default_list_view>false</default_list_view><hint>Yaml script</hint><field_mapping>scriptField1</field_mapping><name>playbook_script</name><field_regex/><field_type>6</field_type></ops_unv_tmplt_field><ops_unv_tmplt_field action="INSERT_OR_UPDATE"><choice_sort_option>1</choice_sort_option><form_start_row>false</form_start_row><sys_updated_on>2020-04-22 08:36:24</sys_updated_on><boolean_value_type>1</boolean_value_type><required>false</required><field_mask/><boolean_no_value/><require_if_field/><sys_id>e76b170496dc403ca82a48c52ead228c</sys_id><require_if_field_value/><array_name_title/><sys_updated_by>Ravi</sys_updated_by><array_value_title/><sys_created_on>2020-04-07 21:33:57</sys_created_on><field_value/><no_space_if_hidden>true</no_space_if_hidden><require_if_visible>false</require_if_visible><sys_created_by>Ravi</sys_created_by><int_field_min/><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id><show_if_field>choiceField2</show_if_field><boolean_yes_value/><form_col_span>1</form_col_span><field_length/><form_end_row>false</form_end_row><label>Execution choice</label><int_field_max/><choice_allow_empty>false</choice_allow_empty><sequence>1</sequence><show_if_field_value>Ansible-Playbook</show_if_field_value><form_row_span>1</form_row_span><default_list_view>false</default_list_view><hint>command or script</hint><field_mapping>choiceField1</field_mapping><name>exec_option</name><field_regex/><field_type>4</field_type></ops_unv_tmplt_field><ops_unv_tmplt_field_choice action="INSERT_OR_UPDATE"><field_id>96c782531acd4fb4b0f38cc842b4acbe</field_id><use_field_value_for_label>true</use_field_value_for_label><sys_id>2db9d264b7d3416aaebbe7b07a941d62</sys_id><sequence>0</sequence><sys_updated_by>Ravi</sys_updated_by><sys_created_on>2020-04-09 13:47:36</sys_created_on><field_value_label>Ansible-Playbook</field_value_label><field_value>Ansible-Playbook</field_value><sys_updated_on>2020-04-09 13:47:36</sys_updated_on><sys_created_by>Ravi</sys_created_by><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id></ops_unv_tmplt_field_choice><ops_unv_tmplt_field_choice action="INSERT_OR_UPDATE"><field_id>96c782531acd4fb4b0f38cc842b4acbe</field_id><use_field_value_for_label>true</use_field_value_for_label><sys_id>e99dab6d47074df8a07c9de3f8300c8b</sys_id><sequence>1</sequence><sys_updated_by>Ravi</sys_updated_by><sys_created_on>2020-04-09 13:48:34</sys_created_on><field_value_label>Other-Ansible-Utility</field_value_label><field_value>Other-Ansible-Utility</field_value><sys_updated_on>2020-04-09 13:48:34</sys_updated_on><sys_created_by>Ravi</sys_created_by><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id></ops_unv_tmplt_field_choice><ops_unv_tmplt_field_choice action="INSERT_OR_UPDATE"><field_id>e76b170496dc403ca82a48c52ead228c</field_id><use_field_value_for_label>true</use_field_value_for_label><sys_id>ed96e0933ba346fe816c37eb5a948a00</sys_id><sequence>1</sequence><sys_updated_by>Ravi</sys_updated_by><sys_created_on>2020-04-07 21:34:25</sys_created_on><field_value_label>script</field_value_label><field_value>script</field_value><sys_updated_on>2020-04-07 21:34:25</sys_updated_on><sys_created_by>Ravi</sys_created_by><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id></ops_unv_tmplt_field_choice><ops_unv_tmplt_field_choice action="INSERT_OR_UPDATE"><field_id>e76b170496dc403ca82a48c52ead228c</field_id><use_field_value_for_label>true</use_field_value_for_label><sys_id>fe01e5307b744edb92439aa471189982</sys_id><sequence>0</sequence><sys_updated_by>Ravi</sys_updated_by><sys_created_on>2020-04-07 21:34:17</sys_created_on><field_value_label>command</field_value_label><field_value>command</field_value><sys_updated_on>2020-04-07 21:34:17</sys_updated_on><sys_created_by>Ravi</sys_created_by><universal_template_id>efa82aef4d624363bd480bb8a7efcfc2</universal_template_id></ops_unv_tmplt_field_choice></related_items_node></ops_unv_tmplt></unload>